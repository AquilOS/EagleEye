PROJECT(VLC)

FIND_PACKAGE(LibVLC)

set(Boost_USE_STATIC_LIBS        OFF)
set(Boost_USE_MULTITHREADED      ON)
set(Boost_USE_STATIC_RUNTIME     OFF)
ADD_DEFINITIONS(-DBOOST_ALL_NO_LIB)
FIND_PACKAGE(Boost REQUIRED COMPONENTS system)
FIND_PACKAGE(CUDA REQUIRED)
FIND_PACKAGE(OpenCV REQUIRED core videoio)
FIND_PACKAGE(Qt5 REQUIRED COMPONENTS Core Network Gui Widgets)
INCLUDE_DIRECTORIES(
	${CMAKE_CURRENT_SOURCE_DIR}/include
	${EagleLib_INCLUDE_DIRECTORIES}
	${LIBVLC_INCLUDE_DIR}
)

LINK_DIRECTORIES(${CUDA_TOOLKIT_ROOT_DIR}/lib/x64)


FILE(GLOB_RECURSE src "src/*.cpp")
FILE(GLOB_RECURSE hdr "include/*.h")

MESSAGE(STATUS
" ============== VLC ==================
	${src}

	${hdr}
"
)

CUDA_ADD_LIBRARY(VLC SHARED ${src} ${hdr})
ADD_DEPENDENCIES(VLC EagleLib)
TARGET_LINK_LIBRARIES(VLC 
	${LIBVLC_LIBRARY} 
	${LIBVLCCORE_LIBRARY} 
	${EagleLib_LIBRARIES}
	opencv_core
	opencv_videoio
	EagleLib
	) 
SET(LIB_DIRS "C:/Program Files/VideoLan/vlc/sdk/lib")
GET_PROPERTY(dirs TARGET VLC PROPERTY INCLUDE_DIRECTORIES)
STRING(REGEX REPLACE ";" "+" RCC_INCLUDE_DEPENDENCIES "${dirs}+" )
ADD_DEFINITIONS(-DPROJECT_INCLUDES="${RCC_INCLUDE_DEPENDENCIES}")
ADD_DEFINITIONS(-DPROJECT_LIB_DIRS="${Qt5_DIR}/../../+${LIB_DIRS}+")
